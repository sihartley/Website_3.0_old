#Mod Rewrite
RewriteEngine on

#Error Pages and Case Insesitive
ErrorDocument 403 /pages/error-pages/403.php
ErrorDocument 404 /pages/error-pages/404.php

RewriteBase /
# css / js file versioning
RewriteRule ^(.*)\.[\d]{10}\.(css|js)$ $1.$2 [L]
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ https://%1/$1 [R=301,L]

#Caching schema
<FilesMatch "\.(css|svg|webp|png|jpg|jpeg|js|php|woff2)$">
    Header set Cache-Control "max-age=86400"
#    Header set Cache-Control "max-age=604800, public"
</FilesMatch>

#Simon: ToDo: CSP Need to add external sources (mmenu, google fonts, foxycart etc.)
#Header set Content-Security-Policy "default-src 'self'; img-src 'self'; style-src 'self' 'unsafe-hashes' https://fonts.googleapis.com/; font-src 'self' https://fonts.googleapis.com https://fonts.gstatic.com; script-src 'self' https://cdnjs.cloudflare.com/ajax/libs/jQuery.mmenu/9.3.0/mmenu.js https://cdn.foxycart.com https://ajax.googleapis.com"

#https://cdnjs.cloudflare.com/ajax/libs/jQuery.mmenu/9.3.0/mmenu.js
#https://fonts.googleapis.com
#https://fonts.gstatic.com
#https://cdn.foxycart.com/vinylimagination/loader.js
#https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js


##### Enable gzip compression for resources #Simon: Note: Test This
#<ifModule mod_gzip.c>
#    mod_gzip_on Yes
#    mod_gzip_dechunk Yes
#    mod_gzip_item_include file .(html?|txt|css|js|php)$
#    mod_gzip_item_include handler ^cgi-script$
#    mod_gzip_item_include mime ^text/.*
#    mod_gzip_item_include mime ^application/x-javascript.*
#    mod_gzip_item_exclude mime ^image/.*
#    mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
#</ifModule>
